// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  var main;

  window.addEventListener('load', function() {
    return FastClick.attach(document.body);
  }, false);

  main = angular.module('TodoGPS', []);

  main.service('sharedData', function() {
    return this.view = 'partials/about.html';
  });

  main.controller('Partials', function($scope, sharedData) {
    return $scope.data = sharedData;
  });

  main.controller('about', function($scope, sharedData) {
    $scope.login = function() {
      return sharedData.view = 'partials/todo.html';
    };
    return $scope.newUser = function() {
      return sharedData.view = 'partials/todo.html';
    };
  });

  main.controller('Todo', function($scope, $http) {
    navigator.geolocation.watchPosition(function(position) {
      $scope.loc = position.coords;
      return console.log(position.coords);
    });
    $scope.formData = {};
    $http.get('/api/todos').success(function(data) {
      return $scope.todos = data;
    }).error(function(data) {
      return console.log(data);
    });
    $scope.createTodo = function() {
      return $http.post('/api/todos', $scope.formData).success(function(data) {
        $scope.formData = {};
        return $scope.todos = data;
      }).error(function(data) {
        return console.log(data);
      });
    };
    return $scope.deleteTodo = function(id) {
      return $http["delete"]('/api/todos/' + id).success(function(data) {
        return $scope.todos = data;
      });
    };
  });

}).call(this);
